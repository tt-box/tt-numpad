<link rel="import" href="../polymer/polymer.html">


<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">


<link rel="import" href="tt-numpad-screen.html">

<link rel="import" href="tt-numpad-grid.html">
<link rel="import" href="tt-numpad-grid-col.html">
<link rel="import" href="tt-numpad-grid-row.html">

<link rel="import" href="tt-numpad-eval.html">


<!--
`tt-numpad`


@demo demo/index.html 
-->

<dom-module id="tt-numpad">
    <template>
        <style>
            :host {
                @apply(--layout-vertical);
                background-color: var(--paper-grey-900);
            }


        </style>
        <tt-numpad-screen id="screen" expression="[[expression]]"></tt-numpad-screen>
        <tt-numpad-grid-col on-keytap="_onKeyTap"></tt-numpad-grid-col>
        <tt-numpad-grid-row on-keytap="_onKeyTap"></tt-numpad-grid-row>
        <tt-numpad-grid on-keytap="_onKeyTap"></tt-numpad-grid>

        <tt-numpad-eval id="calc" expression="[[expression]]" result="[[result]]"></tt-numpad-eval>

    </template>

    <script>
        Polymer({

            is: 'tt-numpad',


            properties: {
                expression: {
                    type: String,
                    value: ''
                }
            },

            _onKeyTap:function (e) {
                var detail = e.detail;
                this._processKey(detail.key);
            },

            _processKey: function (key) {
                console.log(key);
                if (key === '=') {
                    this.async(this.eval);
                } else if (key === 'DEL') {
                    this.del();
                } else {
                    this.expression += key;
                }

            },
            del:function () {
                this.expression ='';
            },

            eval: function () {
                this.$.calc.eval();
            }

        });
    </script>
</dom-module>
